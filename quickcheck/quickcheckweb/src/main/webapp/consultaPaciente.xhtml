<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets" xmlns:p="http://primefaces.org/ui">

    <h:head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="faces/resources/css/style.css" />
        <title>QuickCheck</title>
        <style>
            .Sign-In_Bubble {
                display: flex;
                flex-direction: column;
                align-items: center;
                border-radius: 0 0 1rem 1rem;
                box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
                background: #CDDEDF;
                opacity: 88%;
                width: 100%;
                padding: 3rem;
            }

            .card{
                padding: 2rem;
                box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
            }

            #sidebar {
                float: right;
                width: 300px;
                height: 93.2vh;
                background: #CDDEDF;
                padding: 20px;
                box-shadow: -2px 0px 5px rgba(0, 0, 0, 0.2);
                display: flex;
                flex-direction: column;
                justify-content: space-around;
            }

            .content {
                width: calc(100% - 300px);
                float: left;
            }
        </style>
    </h:head>

    <h:body>
        <div vw="" class="enabled">
            <div vw-access-button="" class="active"></div>
            <div vw-plugin-wrapper="">
                <div class="vw-plugin-top-wrapper"></div>
            </div>
        </div>
        <script src="https://vlibras.gov.br/app/vlibras-plugin.js"></script>
        <script>
            new window.VLibras.Widget('https://vlibras.gov.br/app');
        </script>
        <h:form id="form">
            <header class="header">
                <div class="logoInicio">
                    <img src="resources/images/logoPrinc.png" id="imgLogoPrinc" alt="" />
                </div>

                <div class="linksHeader">
                    <h4 id="btnInicio"><a href="inicioPaciente.xhtml">Início</a></h4>
                </div>

                <div class="linksHeader">
                    <h4 id="btnDiagnostico"><a href="">Pré-Diagnóstico</a></h4>
                </div>

                <div class="linksHeader">
                    <h4 id="btnPerfil"><a href="perfilPaciente.xhtml">Perfil</a></h4>
                </div>
                <p:commandButton value="Sair" action="#{pacienteBean.logout()}" styleClass="ui-button-secondary ui-button-flat" />
            </header>

            <div class="tituloAba">
                <h2>CONSULTAS</h2>
            </div>
            <div class="content">
                <div class="Sign-In_Bubble">
                    <h2 style="margin-bottom: 1rem;">Pesquisar Clínicas</h2>
                    <div class="input-box">
                        <label for="especialidade">Especialidade: </label>
                        <p:selectOneMenu id="especialidade">
                            <f:selectItem itemLabel="Todos" itemValue="Todos" />
                            <f:selectItem itemLabel="Clinico Geral" itemValue="Clinico Geral" />
                            <f:selectItem itemLabel="Pediatra" itemValue="Pediatra" />
                            <f:selectItem itemLabel="Cardiologista" itemValue="Cardiologista" />
                            <f:selectItem itemLabel="Psiquiatra" itemValue="Psiquiatra" />
                            <f:selectItem itemLabel="Oftalmologista" itemValue="Oftalmologista" />
                            <f:selectItem itemLabel="Otorrinolaringologista" itemValue="Otorrinolaringologista" />
                            <f:selectItem itemLabel="Oncologista" itemValue="Oncologista" />
                            <f:selectItem itemLabel="Urologista" itemValue="Urologista" />
                            <f:selectItem itemLabel="Dermatologista" itemValue="Dermatologista" />
                            <f:selectItem itemLabel="Ginecologista" itemValue="Ginecologista" />
                        </p:selectOneMenu>

                        <label for="convenio" style="margin-left: 1rem;">Convênio: </label>
                        <p:selectOneMenu id="convenio">
                            <f:selectItem itemLabel="Todos" itemValue="Todos" />
                            <f:selectItem itemLabel="Unimed" itemValue="Unimed"/>
                            <f:selectItem itemLabel="Amil" itemValue="Amil"/>
                            <f:selectItem itemLabel="NotreDame" itemValue="NotreDame"/>
                            <f:selectItem itemLabel="Ipsemg" itemValue="Ipsemg"/>
                            <f:selectItem itemLabel="Medsênior" itemValue="Medsênior" />
                            <f:selectItem itemLabel="Particular" itemValue="Particular" />
                        </p:selectOneMenu>
                    </div>
                </div>

                <div class="card">
                    <p:gmap center="#{pacienteBean.coordenadaEndereco}" model="#{pacienteBean.model}" zoom="15" type="HYBRID" style="width:100%;height:400px; box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);">
                        <p:ajax event="overlaySelect" listener="#{pacienteBean.onMarkerSelect}" update=":form2"/>

                        <p:gmapInfoWindow id="infoWindow">
                            <p:panelGrid columns="2">
                                <h:outputText value="Nome: #{pacienteBean.marker.title}" />
                                <h:outputText value="Especialidade: #{pacienteBean.marker.data.especialidade}" />
                                <h:outputText value="Endereço: #{pacienteBean.marker.data.endereco}" />
                                <h:outputText value="Telefone: #{pacienteBean.marker.data.telefone}" />
                                <h:outputText value="Convenios: " />
                                <ui:repeat value="#{pacienteBean.marker.data.convenios}" var="convenio">
                                    <h:outputText value="#{convenio}" />
                                    <br/>
                                </ui:repeat>
                            </p:panelGrid>
                        </p:gmapInfoWindow>
                    </p:gmap>
                </div>

            </div>
        </h:form>
        <h:form id="form2"> 
            <p:growl id="growl" showDetail="true" />
            <div id="sidebar">
                <h2 style="padding-bottom: 1rem;">Agendar Horário</h2>
                <h3><h:outputText value="Clinica: #{pacienteBean.clinica.nome}" /></h3>
                <h3><h:outputText value="Medico: #{pacienteBean.clinica.nomemedico}" /></h3>
                <div>
                    <p:outputLabel for="@next" value="Data: " style="margin-left: 0.2rem;"/>
                    <p:calendar id="agenda" disabledWeekends="true" mindate="#{pacienteBean.dataAtual}" value="#{pacienteBean.consulta.data}">
                        <p:ajax event="dateSelect" listener="#{pacienteBean.onDateSelect}" update="horarios"/>
                    </p:calendar>
                </div>

                <div>
                    <p:outputLabel for="@next" value="Horário: " style="margin-left: 0.2rem;"/>
                    <p:selectOneMenu id="horarios" value="#{pacienteBean.consulta.horario}">
                        <f:selectItems value="#{pacienteBean.horarios}" var="horario" itemLabel="#{horario}" itemValue="#{horario}" />
                    </p:selectOneMenu>
                </div>

                <div>
                    <p:outputLabel for="@next" value="Convenio: " style="margin-left: 0.2rem;"/>
                    <p:selectOneMenu id="convenios" value="#{pacienteBean.consulta.convenio}">
                        <f:selectItems value="#{pacienteBean.convenios}" var="convenio" itemLabel="#{convenio}" itemValue="#{convenio}" />
                    </p:selectOneMenu>
                </div>
                <p:commandButton value="Agendar Consulta" validateClient="true" action="#{pacienteBean.cadastrarConsulta()}" update="form2 growl" />
            </div>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC0QG_G0LdTKu_AIzR9awlnzqIMOU0g3pI" type="text/javascript"></script>
        </h:form>
    </h:body>
</html>